.PHONY: help setup install run clean

help: ## Show available commands
	@echo ""
	@echo "â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—"
	@echo "â•‘       IncidentFox Slack Bot                   â•‘"
	@echo "â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
	@echo ""
	@grep -E '^[a-zA-Z_-]+:.*?## .*$$' $(MAKEFILE_LIST) | awk 'BEGIN {FS = ":.*?## "}; {printf "  \033[36m%-15s\033[0m %s\n", $$1, $$2}'
	@echo ""

setup: ## Create venv and install dependencies (first time setup)
	@echo "ğŸ“¦ Setting up virtual environment..."
	uv venv
	@echo "âœ… Virtual environment created"
	@echo ""
	@echo "Next steps:"
	@echo "  1. source .venv/bin/activate"
	@echo "  2. make install"
	@echo "  3. cp env.example .env  # Edit with your tokens"
	@echo "  4. make run"

install: ## Install dependencies (run inside venv)
	@echo "ğŸ“¥ Installing dependencies..."
	uv pip install -e .
	@echo "âœ… Dependencies installed"

run: ## Run the Slack bot (Socket Mode)
	@echo "âš¡ï¸ Starting Slack bot..."
	python app.py

clean: ## Remove virtual environment and cache files
	rm -rf .venv __pycache__ *.egg-info uv.lock
	@echo "ğŸ§¹ Cleaned up"

